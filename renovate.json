{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": [
        "config:recommended",
        "helpers:pinGitHubActionDigests",
        ":gitSignOff"
    ],
    "timezone": "America/Toronto",
    "schedule": [
        "* 19-23 * * *",
        "* 0-2 * * *"
    ],
    "enabledManagers": [
        "tekton",
        "gomod",
        "dockerfile",
        "github-actions"
    ],
    "packageRules": [
        {
            "description": "Schedule Konflux tekton task updates Tuesday and Thursday nights (7 PM - 2 AM)",
            "matchManagers": [
                "tekton"
            ],
            "schedule": [
                "* 19-23 * * 2,4",
                "* 0-2 * * 3,5"
            ]
        },
        {
            "description": "Enable automerge Konflux tekton task updates",
            "matchManagers": [
                "tekton"
            ],
            "automerge": true
        },
        {
            "description": "Tekton (Konflux) dependencies group",
            "matchManagers": [
                "tekton"
            ],
            "groupName": "tekton (konflux) dependencies",
            "groupSlug": "tekton-deps",
            "commitMessageTopic": "Konflux Task {{depName}}"
        },
        {
            "description": "Go dependencies group",
            "matchManagers": [
                "gomod"
            ],
            "groupName": "go dependencies",
            "groupSlug": "go-deps",
            "commitMessageTopic": "Go {{depName}}"
        },
        {
            "description": "Dockerfile dependencies group",
            "matchManagers": [
                "dockerfile"
            ],
            "groupName": "dockerfile dependencies",
            "groupSlug": "dockerfile-deps",
            "commitMessageTopic": "Dockerfile {{depName}}"
        },
        {
            "description": "GitHub Actions dependencies group",
            "matchManagers": [
                "github-actions"
            ],
            "groupName": "github-actions dependencies",
            "groupSlug": "github-actions-deps",
            "commitMessageTopic": "GitHub Action {{depName}}"
        },
        {
            "description": "Disable major version updates for Go modules and Dockerfiles",
            "matchManagers": [
                "dockerfile",
                "gomod"
            ],
            "matchUpdateTypes": ["major"],
            "matchBaseBranches": "main",
            "enabled": false
        },
        {
            "description": "Disable minor version updates for Go version specific images",
            "matchManagers": [
                "dockerfile"
            ],
            "matchPackageNames": [
                "go-toolset"
            ],
            "matchUpdateTypes": ["minor"],
            "matchBaseBranches": "main",
            "enabled": false
        }
    ],
    "constraints": {
        "go": "1.24"
    },
    "ignorePaths": [
        "tests/registry/**",
        "build-tools/**"
    ],
    "prHourlyLimit": 20,
    "prConcurrentLimit": 10
}
